<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0066)https://www.slideshare.net/slideshow/embed_code/key/9JyHcpL99Us0zG -->
<html xmlns="http://www.w3.org/1999/xhtml" style="height:100%;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="canonical" href="https://www.slideshare.net/slideshow/java-memory-analysis-problems-and-solutions/75614475">

    <meta name="robots" content="noindex">

    <link rel="stylesheet" href="./Java Memory Analysis_ Problems and Solutions_files/app.10d489608a34b3c77437.css" media="screen">
    <link rel="stylesheet" href="./Java Memory Analysis_ Problems and Solutions_files/app_critical.1a2445104cad58f2792a.css" media="screen">
    <link rel="stylesheet" href="./Java Memory Analysis_ Problems and Solutions_files/slideview_critical.48e8d13c09994269bba9.css" media="screen">
    <link rel="stylesheet" href="./Java Memory Analysis_ Problems and Solutions_files/base.8b922773da9203cc7c61.css" media="screen">
    <link rel="stylesheet" href="./Java Memory Analysis_ Problems and Solutions_files/player_toolbar.20224c694a9b9749f9c4.css" media="screen">
    <link rel="stylesheet" href="./Java Memory Analysis_ Problems and Solutions_files/slideshare-icons.8833fc2200d3822f96e9.css" media="screen">

    <!-- SL:begin:notranslate -->
    <title>Java Memory Analysis: Problems and Solutions</title>
    <!-- SL:end:notranslate -->
    <!--[if IE]><style>.slidesContainer img { border: none } </style><![endif]-->
    <script async="" src="./Java Memory Analysis_ Problems and Solutions_files/ga.js"></script><script src="./Java Memory Analysis_ Problems and Solutions_files/runtime.1574e1daf7efe79cc05a.js"></script>
    <script src="./Java Memory Analysis_ Problems and Solutions_files/combined_jquery.35e9f18e5955b534436f.js"></script>

    <script type="text/javascript">
      var slideshare_object = {
        flagging: {"update_url":"https://www.slideshare.net/main/flag?slideshow_id=75614475","is_flagged":false},
        user: {"userGroup":"non-member","login":"guest","id":null,"loggedin":false,"name":null,"is_valid_fbuser":false,"fb_userid":null,"is_pro":"false","su":false,"is_test_user":false,"has_uploads":null,"is_li_connected":false,"is_li_auto_created_user":false,"show_li_connect_cta":false,"has_privacy_enabled":null,"scribd_subscriber":false,"connected_with_scribd":false,"trial_eligible":false},
        timer: { start: (new Date()).getTime(), end: '', execTime: '' },
        top_nav: { get_url: "/top_nav"},
        dev: false,
        init: [],
        feature_flag: [],
        is_ssl: true,
        rum_pagekey: "desktop_slideview_embed_code_loggedout",
        page_key: "slideshow/embed_code",
        slideshow: {
          id: 75614475,
          is_clickgen_enabled: '',
          clickgen_url: '',
          ss_url: '/slideshow/java-memory-analysis-problems-and-solutions/75614475',
          total_slides: 43
        }
      };
      slideshare_object.slideshow_config = {};
      $.extend(true, slideshare_object.slideshow_config, {"id":75614475,"is_private":false,"is_only_private":false,"stripped_title":"java-memory-analysis-problems-and-solutions","slide_count":43,"image_ready":true,"has_video":false,"video_slides_count":0,"page":null,"image_bucket_location":"https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101","ppt_location":"java-mem-analysis-publicslideshare-170502195101","timestamp":1665811681,"html_ttffont_url_suffix":".js","html_eotfont_url_suffix":"-eot.js","mode":"image","player_type":"presentation","fullscreen_bgcolor":"jsplBgColorBlack","player_bgcolor":"jsplBgColorBigfoot","spinner_url":"https://public.slidesharecdn.com/v2/images/ssplayer/loading.gif","spinner_url_fullscreen":"https://public.slidesharecdn.com/v2/images/ssplayer/loading_black.gif","disable_eagerload":true,"fullscreen_url":"/fullscreen/MikhailMishaDmitriev/java-memory-analysis-problems-and-solutions","author_id":129973534,"slideview_url":"/MikhailMishaDmitriev/java-memory-analysis-problems-and-solutions?ref=","embed_code":"\u003ciframe src=\"https://www.slideshare.net/slideshow/embed_code/key/9JyHcpL99Us0zG\" width=\"597\" height=\"486\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\" style=\"border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;\" allowfullscreen\u003e \u003c/iframe\u003e \u003cdiv style=\"margin-bottom:5px\"\u003e \u003cstrong\u003e \u003ca href=\"https://www.slideshare.net/slideshow/java-memory-analysis-problems-and-solutions/75614475\" title=\"Java Memory Analysis: Problems and Solutions\" target=\"_blank\"\u003eJava Memory Analysis: Problems and Solutions\u003c/a\u003e \u003c/strong\u003e from \u003cstrong\u003e\u003ca href=\"https://www.slideshare.net/MikhailMishaDmitriev\" target=\"_blank\"\u003e\u0026quot;Mikhail \u0026quot;Misha\u0026quot;\u0026quot; Dmitriev\u003c/a\u003e\u003c/strong\u003e \u003c/div\u003e","embed_sizes":{"config":{"defaultPreset":"preset4"},"presets":{"preset1":{"size":{"width":340,"height":290},"displaySize":{"width":40,"height":30}},"preset2":{"size":{"width":425,"height":355},"displaySize":{"width":50,"height":38}},"preset3":{"size":{"width":510,"height":420},"displaySize":{"width":60,"height":45}},"preset4":{"size":{"width":595,"height":485},"displaySize":{"width":70,"height":53}}}},"iframe_url":"//www.slideshare.net/slideshow/embed_code/key/9JyHcpL99Us0zG","iframe_code":"\u003ciframe src=\"{iframe_url}\" width=\"{width}\" height=\"{height}\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\" style=\"border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;\" allowfullscreen\u003e \u003c/iframe\u003e \u003cdiv style=\"margin-bottom:5px\"\u003e \u003cstrong\u003e \u003ca href=\"https://www.slideshare.net/slideshow/java-memory-analysis-problems-and-solutions/75614475\" title=\"Java Memory Analysis: Problems and Solutions\" target=\"_blank\"\u003eJava Memory Analysis: Problems and Solutions\u003c/a\u003e \u003c/strong\u003e from \u003cstrong\u003e\u003ca href=\"https://www.slideshare.net/MikhailMishaDmitriev\" target=\"_blank\"\u003e\u0026quot;Mikhail \u0026quot;Misha\u0026quot;\u0026quot; Dmitriev\u003c/a\u003e\u003c/strong\u003e \u003c/div\u003e","wp_code":"[slideshare id=75614475\u0026doc=java-mem-analysis-publicslideshare-170502195101]","show_related_content":"1","sharescreen":{"url":"https://www.slideshare.net/slideshow/java-memory-analysis-problems-and-solutions/75614475","title":"Java Memory Analysis: Problem...","slideshow_id":75614475,"html":"\u003cdiv class=\"shareScreen\"\u003e\n  \u003ca href=\"#\" class=\"close\"\u003e\u0026times;\u003c/a\u003e\n  \u003cul class=\"shareMethods\"\u003e\n    \u003cli class=\"embed\"\u003e\n      \u003clabel for=\"embed-code\"\u003eEmbed\u003c/label\u003e\n      \u003cinput type='text' class=\"shareScreenEmbedCode\" value=\"code\" name=\"embed-code\" /\u003e\n    \u003c/li\u003e\n    \u003cli class=\"url last\"\u003e\n      \u003clabel for=\"embed-url\"\u003eURL\u003c/label\u003e\n      \u003cinput type='text' class=\"shareScreenSSUrl\" value=\"code\" name=\"embed-url\" /\u003e\n    \u003c/li\u003e\n  \u003c/ul\u003e\n  \u003cform class=\"emailShare\"\u003e\n    \u003cfieldset\u003e\n      \u003clegend\u003eEmail this\u003c/legend\u003e\n      \u003cinput type=\"hidden\" class=\"shareDefaultMessage\" value=\"I think you will find this useful.\" /\u003e\n      \u003cul\u003e\n        \u003cli\u003e\n          \u003clabel for=\"name\"\u003eYour name\u003c/label\u003e\n          \u003cinput class='shareScreenFromName' type=\"text\" value=\"\" /\u003e\n        \u003c/li\u003e\n        \u003cli\u003e\n          \u003clabel for=\"mailID\"\u003eEmail to\u003c/label\u003e\n          \u003cinput class=\"shareScreenMailID\" type=\"text\" value=\"\" /\u003e\n        \u003c/li\u003e\n        \u003cli class=\"submit\"\u003e\n          \u003clabel\u003e\u0026nbsp;\u003c/label\u003e\n          \u003cinput class=\"shareSprite\" type=\"submit\" value=\"\" /\u003e\n        \u003c/li\u003e\n      \u003c/ul\u003e\n      \u003c/fieldset\u003e\n  \u003c/form\u003e\n\u003c/div\u003e\u003c!-- shareScreen ends here --\u003e","user_name":""},"track_slide_enable":1,"render_links":"default","twitter_recommended_users":null,"twitter_share_text":"Java Memory Analysis: Problems and Solutions #garbagecollection #heap","share_text":"Java Memory Analysis: Problems and Solutions by \"Mikhail \"Misha\"\" Dmitriev via slideshare","pin_image_url":"https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-1-638.jpg?cb=1665811681","autoplayOnEmbed":false,"lastscreen":{"url":"https://www.slideshare.net/slideshow/java-memory-analysis-problems-and-solutions/75614475","related":[{"url":"/slideshow/exactlyonce-stream-processing-with-kafka-streams-80077182/80077182","title":"Exactly-once Stream Processing with...","author":"Guozhang Wang","author_login":"GuozhangWang","views":3750,"thumbnail":"https://cdn.slidesharecdn.com/ss_thumbnails/kafkastreamseoskafkasummitsf2017final-170923064446-thumbnail.jpg?width=320\u0026height=320\u0026fit=bounds"}]},"container":"player","enable_viewSS":true,"disable_lastscreen":false,"disable_share":false,"start_slide":1,"hosted_in":"embed","slideshow_slideshow_type":0,"video_hash":{},"show_image_player":true,"video_slides":[],"slideshow_real_total_slides_count":43,"is_ssl":true,"flagging":{"update_url":"https://www.slideshare.net/main/flag?slideshow_id=75614475","is_flagged":false},"slideshow":{"slideshow":{"id":75614475,"ppt_location":"java-mem-analysis-publicslideshare-170502195101","title":"Java Memory Analysis: Problems and Solutions","created_at":"2017-05-02T19:51:01.000Z","user_id":129973534,"tag_text":"java,jvm,heap,garbage collection,memory leaks,heap analysis,performance tuning","converted":2,"retries":0,"total_slides":43,"featured":0,"description":"We explain various kinds of bad memory utilization patterns in Java applications, present a tool to efficiently detect them, and give a number of common solutions to these problems.","stripped_title":"java-memory-analysis-problems-and-solutions","converted_time":"2017-05-02T19:51:03.000Z","created_by":"phpapp02","license":0,"converted_by":"54.226.21.206","extension":"pdf","featured_on":null,"language":"en","contestflag":false,"api":false,"api_accounts_id":0,"privacy_level":0,"src_file_share":"ALL","inter_file_share":"None","src_dwnld":true,"inter_dwnld":false,"flag_visible":1,"web_based":false,"from_web":false,"embeds":0,"secret_url":"9JyHcpL99Us0zG","uploadtype":28,"slideshow_type":0,"available":0,"updated_at":"2022-10-15T05:28:01.000Z","app_userid":null,"app_name":"ss","categorized":2,"show_on_ss":true,"app_imported_at":null,"upload_key":"java-mem-analysis-publicslideshare-u-1493754659705-b-u.pdf","spam":"ham","public_status":"public","dont_show_ads":false}},"slideshow_title":"Java Memory Analysis: Problems and Solutions","slideshow-transcript-blocks":["Java Memory Analysis:\nProblems and Solutions\n ","How Java apps\n(ab)use memory\n ","Assume that at the high level your data\nis represented ef\u0026#xFB01;ciently\n\u0026#x2022; Data doesn\u0026#x2019;t sit in memory for longer than needed\n\u0026#x2022; No unnecessary duplicate data structures\u0026#x2028;\n- E.g. don\u0026#x2019;t keep same objects in both a List and a Set\n\u0026#x2022; Data structures are appropriate\u0026#x2028;\n- E.g. don\u0026#x2019;t use ConcurrentHashMap when no concurrency\n\u0026#x2022; Data format is appropriate\u0026#x2028;\n- E.g. don\u0026#x2019;t use Strings for int/double numbers\u0026#x2028;\n ","Main sources of memory waste\n(from bottom to top level)\n\u0026#x2022; JVM internal object implementation\n\u0026#x2022; Inef\u0026#xFB01;cient common data structures\u0026#x2028;\n- Collections\u0026#x2028;\n- Boxed numbers\n\u0026#x2022; Data duplication - often biggest overhead\n\u0026#x2022; Memory leaks\n ","Internal Object Format in HotSpot JVM\n ","Internal Object Format: Alignment\n\u0026#x2022; To enable 4-byte pointers (compressedOops) with\n\u0026gt;4G heap, objects are 8-byte aligned\n\u0026#x2022; Thus, for example:\u0026#x2028;\n- java.lang.Integer effective size is 16 bytes\u0026#x2028;\n(12b header + 4b int)\u0026#x2028;\n- java.lang.Long effective size is 24 bytes - not 20!\u0026#x2028;\n(12b header + 8b long + 4b padding)\n ","Summary: small objects are bad\n\u0026#x2022; A small object\u0026#x2019;s overhead is up to 400% of its\nworkload\n\u0026#x2022; There are apps with up to 40% of the heap wasted\ndue to this\n\u0026#x2022; See if you can change your code to \u0026#x201C;consolidate\u0026#x201D;\nobjects or put their contents into \u0026#xFB02;at arrays\n\u0026#x2022; Avoid heap size \u0026gt; 32G! (really ~30G)\u0026#x2028;\n- Unless your data is mostly int[], byte[] etc.\n ","Common Collections\n\u0026#x2022; JDK: java.util.ArrayList, java.util.HashMap,\njava.util.concurrent.ConcurrentHashMap etc.\n\u0026#x2022; Third-party - mainly Google:\ncom.google.common.collect.*\n\u0026#x2022; Scala has its own equivalent of JDK collections\n\u0026#x2022; JDK collections are nothing magical\u0026#x2028;\n- Written in Java, easy to load and read in IDE\n ","ArrayList Internals\n ","HashMap Internals\n ","Memory Footprint of JDK Collections\n\u0026#x2022; JDK pays not much attention to memory footprint\u0026#x2028;\n- Just some optimizations for empty ArrayLists and HashMaps\u0026#x2028;\n- ConcurrentHashMap and some Google collections are the\nworst \u0026#x201C;memory hogs\u0026#x201D;\n\u0026#x2022; Memory is wasted due to:\u0026#x2028;\n- Default size of the internal array (10 for AL, 16 for HM) too\nhigh for small maps. Never shrinks after initialization.\u0026#x2028;\n- $Entry objects used by all Maps take at least 32b each! \u0026#x2028;\n- Sets just reuse Map structure, no footprint optimization\n ","Boxed numbers - related to collections\n\u0026#x2022; java.lang.Integer, java.lang.Double etc.\n\u0026#x2022; Were introduced mainly to avoid creating\nspecialized classes like IntToObjectHashMap\n\u0026#x2022; However, proven to be extremely wasteful:\u0026#x2028;\n- Single int takes 4b. java.lang.Integer effective size is 16b\n(12b header + 4b int), plus 4b pointer to it\u0026#x2028;\n- Single long takes 8b. java.lang.Long effective size is 24b\n(12b header + 8b long + 4b padding), plus 4b pointer to it\n ","JDK Collections: Summary\n\u0026#x2022; Initialized, but empty collections waste memory\n\u0026#x2022; Things like HashMap\u0026lt;Object, Integer\u0026gt; are bad\n\u0026#x2022; HashMap$Entry etc. may take up to 30% of memory\n\u0026#x2022; Some third-party libraries provide alternatives\u0026#x2028;\n- In particular, fastutil.di.unimi.it (University of Milan, Italy)\u0026#x2028;\n- Has Object2IntHashMap, Long2ObjectHashMap,\nInt2DoubleHashMap, etc. - no boxed numbers\u0026#x2028;\n- Has Object2ObjectOpenHashMap : no $Entry objects\n ","Data Duplication\n\u0026#x2022; Can happen for many reasons:\u0026#x2028;\n- s = s1 + s2 or s = s.toUpperCase() etc. always\ngenerates a new String object\u0026#x2028;\n- intObj = new Integer(intScalar) always generates\na new Integer object\u0026#x2028;\n- Duplicate byte[] buffers in I/O, serialization, etc.\n\u0026#x2022; Very hard to detect without tooling\u0026#x2028;\n- Small amount of duplication is inevitable\u0026#x2028;\n- 20-40% waste is not uncommon in unoptimized apps\n\u0026#x2022; Duplicate Strings are most common and easy to \u0026#xFB01;x\n ","Dealing with String duplication\n\u0026#x2022; Use tooling to determine where dup strings are either\u0026#x2028;\n- generated, e.g. s = s.toUpperCase();\u0026#x2028;\n- permanently attached, e.g. this.name = name;\n\u0026#x2022; Use String.intern() to de-duplicate\u0026#x2028;\n- Uses a JVM-internal fast, scalable canonicalization hashtable\u0026#x2028;\n- Table is \u0026#xFB01;xed and preallocated - no extra memory overhead \u0026#x2028;\n- Small CPU overhead is normally offset by reduced GC time\nand improved cache locality\n\u0026#x2022; s = s.toUpperCase.intern();\u0026#x2028;\nthis.name = name.intern(); \u0026#x2026;\n ","Other duplicate data\n\u0026#x2022; Can be almost anything. Examples:\u0026#x2028;\n- Timestamp objects\u0026#x2028;\n- Partitions (with HashMaps and ArrayLists) in Apache Hive\u0026#x2028;\n- Various byte[], char[] etc. data buffers everywhere\n\u0026#x2022; So far convenient tooling so far for automatic\ndetection of arbitrary duplicate objects\n\u0026#x2022; But one can often guess correctly\u0026#x2028;\n- Just look at classes that take most memory\u0026#x2026;\n ","Dealing with non-string duplicates\n\u0026#x2022; Use WeakHashMap to store canonicalized objects\u0026#x2028;\n- com.google.common.collect.Interner wraps a\n(Weak)HashMap\n\u0026#x2022; For big data structures, interning may cause some\nCPU performance impact\u0026#x2028;\n- Interning calls hashCode() and equals()\u0026#x2028;\n- GC time reduction would likely offset this\n\u0026#x2022; If duplicate objects are mutable, like HashMap\u0026#x2026;\u0026#x2028;\n- May need CopyOnFirstChangeHashMap, etc.\n ","Duplicate Data: Summary\n\u0026#x2022; Duplicate data may cause huge memory waste\u0026#x2028;\n- Observed up to 40% overhead in unoptimized apps\n\u0026#x2022; Duplicate Strings are easy to\u0026#x2028;\n- Detect (but need tooling to analyze a heap dump)\u0026#x2028;\n- Get rid of - just use String.intern()\n\u0026#x2022; Other kinds of duplicate data more dif\u0026#xFB01;cult to \u0026#xFB01;nd\u0026#x2028;\n- But it\u0026#x2019;s worth the effort!\u0026#x2028;\n- Mutable duplicate data is more dif\u0026#xFB01;cult to deal with\n ","Memory Leaks\n\u0026#x2022; Unlike C++, Java doesn\u0026#x2019;t have real leaks\u0026#x2028;\n- Data that\u0026#x2019;s not used anymore, but not released\u0026#x2028;\n- Too much persistent data cached in memory\n\u0026#x2022; No reliable way to distinguish leaked data\u0026#x2026;\u0026#x2028;\n- But any data structure that just keeps growing is bad\n\u0026#x2022; So, just pay attention to the biggest (and growing)\ndata structures\u0026#x2028;\n- Heap dump: see which GC root(s) hold most memory\u0026#x2028;\n- Runtime pro\u0026#xFB01;ling can be more accurate, but more expensive\n ","JXRay Memory\nAnalysis Tool\n ","What is it\n\u0026#x2022; Of\u0026#xFB02;ine heap analysis tool\u0026#x2028;\n- Runs once on a given heap dump, produces a text report\n\u0026#x2022; Simple command-line interface: \u0026#x2028;\n- Just one jar + .sh script\u0026#x2028;\n- No complex installation\u0026#x2028;\n- Can run anywhere (laptop or remote headless machine)\u0026#x2028;\n- Needs JDK 8\n\u0026#x2022; See http://www.jxray.com for more info\n ","JXRay: main features\n\u0026#x2022; Shows you what occupies the heap\u0026#x2028;\n- Object histogram: which objects take most memory\u0026#x2028;\n- Reference chains: which GC roots/data structures keep\nbiggest object \u0026#x201C;lumps\u0026#x201D; in memory\n\u0026#x2022; Shows you where memory is wasted\u0026#x2028;\n- Object headers\u0026#x2028;\n- Duplicate Strings\u0026#x2028;\n- Bad collections (empty; 1-element; small (2-4 element))\u0026#x2028;\n- Bad object arrays (empty (all nulls); length 0 or 1; 1-element)\u0026#x2028;\n- Boxed numbers\u0026#x2028;\n- Duplicate primitive arrays (e.g. byte[] buffers)\n ","Keeping results succinct\n\u0026#x2022; No GUI - generates a plain text report\u0026#x2028;\n- Easy to save and exchange\u0026#x2028;\n- Small: ~50K regardless of the dump size\u0026#x2028;\n- Details a given problem once its overhead is above\nthreshold (by default 0.1% of used heap)\n\u0026#x2022; Knows about internals of most standard collections\u0026#x2028;\n- More compact/informative representation\n\u0026#x2022; Aggregates reference chains from GC roots to\nproblematic objects\n ","Reference chain aggregation:\nassumptions\n\u0026#x2022; A problem is important if many objects have it\u0026#x2028;\n- E.g.1000s/1000,000s of duplicate strings\n\u0026#x2022; Usually there are not too many places in the code\nresponsible for such a problem\u0026#x2028;\n- Foo(String s) {\u0026#x2028;\nthis.s = s.toUpperCase(); \u0026#x2026;\u0026#x2028;\n}\u0026#x2028;\n- Bar(String s1, String s2) {\u0026#x2028;\nthis.s = s1 + s2; \u0026#x2026;\u0026#x2028;\n}\n ","Reference chain aggregation: what is it\n\u0026#x2022; In the heap, we may have e.g.\u0026#x2028;\nBaz.stat1 -\u0026gt; HashMap@243 -\u0026gt; ArrayList@650 -\u0026gt; Foo.s = \u0026#x201C;xyz\u0026#x201D;\u0026#x2028;\nBaz.stat2 -\u0026gt; LinkedList@798 -\u0026gt; HashSet@134 -\u0026gt; Bar.s = \u0026#x201C;0\u0026#x201D;\u0026#x2028;\nBaz.stat1 -\u0026gt; HashMap@529 -\u0026gt; ArrayList@351 -\u0026gt; Foo.s = \u0026#x201C;abc\u0026#x201D;\u0026#x2028;\nBaz.stat2 -\u0026gt; LinkedList@284 -\u0026gt; HashSet@960 -\u0026gt; Bar.s = \u0026#x201C;1\u0026#x201D;\u0026#x2028;\n\u0026#x2026; 1000s more chains like this\n\u0026#x2022; JXRay aggregates them all into just two lines:\u0026#x2028;\nBaz.stat1 -\u0026gt; {HashMap} -\u0026gt; {ArrayList} -\u0026gt; Foo.s (\u0026#x201C;abc\u0026#x201D;,\u0026#x201D;xyz\u0026#x201D; and\u0026#x2028;\n3567 more dup strings)\u0026#x2028;\nBaz.stat2 -\u0026gt; {LinkedList} -\u0026gt; {HashSet} -\u0026gt; Bar.s (\u0026#x201C;0\u0026#x201D;, \u0026#x201C;1\u0026#x201D; and \u0026#x2026;)\n ","Treating collections specially\n\u0026#x2022; Object histogram: standard vs JXRay view\u0026#x2028;\nHashMap$Entry 21500 objs 430K\u0026#x2028;\nHashMap$Entry[] 3200 objs 180K\u0026#x2028;\nHashMap 3200 objs 150K \u0026#x2028;\nvs\u0026#x2028;\n{HashMap} 3200 objs 760K\n\u0026#x2022; Reference chains:\u0026#x2028;\nFoo \u0026lt;- HashMap$Entry.value \u0026lt;- HashMap$Entry[] \u0026lt;-\u0026#x2028;\n\u0026lt;- HashMap \u0026lt;- Object[] \u0026lt;- ArrayList \u0026lt;- rootX\u0026#x2028;\nvs\u0026#x2028;\nFoo \u0026lt;- {HashMap.values} \u0026lt;- {ArrayList} \u0026lt;- rootX\n ","Bad collections\n\u0026#x2022; Empty: no elements at all\u0026#x2028;\n- Is it used at all? If yes, allocate lazily.\n\u0026#x2022; 1-element\u0026#x2028;\n- Always has only 1 element - replace with object\u0026#x2028;\n- Almost always has 1 element - solution more complex.\nSwitch between Object and collection/array lazily.\n\u0026#x2022; Small: 2..4 elements\u0026#x2028;\n- Consider smaller initial capacity\u0026#x2028;\n- Consider replacing with a plain array\n ","Bad object arrays\n\u0026#x2022; Empty: only nulls\u0026#x2028;\n- Same as empty collections - delete or allocate lazily\n\u0026#x2022; Length 0\u0026#x2028;\n- Replace with a singleton zero-length array\n\u0026#x2022; Length 1\u0026#x2028;\n- Replace with an object?\n\u0026#x2022; Single non-null element\u0026#x2028;\n- Replace with an object? Reduce length?\n ","Memory Analysis and\nReducing Footprint:\nconcrete cases\n ","A Monitoring app\n\u0026#x2022; Scalability wasn\u0026#x2019;t great\u0026#x2028;\n- Some users had to increase -Xmx again and again.\u0026#x2028;\n- Unclear how to choose the correct size\n\u0026#x2022; Big heap -\u0026gt; long full GC pauses -\u0026gt; frozen UI\n\u0026#x2022; Some OOMs in small clusters\u0026#x2028;\n- Not a scale problem - a bug?\n ","Investigation, part 1\n\u0026#x2022; Started with the smaller dumps with OOMs\u0026#x2028;\n- Immediately found duplicate strings\u0026#x2028;\n- One string repeated 1000s times used 90% of the heap \u0026#x2028;\n- Long SQL query saved in DB many times, then retrieved\u0026#x2028;\n- Adding two String.intern() calls solved the problem.. almost\n\u0026#x2022; Duplicate byte[] buffers in a 3rd-party library code\u0026#x2028;\n- That still caused noticeable overhead\u0026#x2028;\n- Ended up limiting saved query size at high level\u0026#x2028;\n- Library/auto-gen code may be dif\u0026#xFB01;cult to change\u0026#x2026;\n ","Investigation, part 2\n\u0026#x2022; Next, looked into heap dumps with scalability\nproblems\u0026#x2028;\n- Both real and arti\u0026#xFB01;cial benchmark setup\n\u0026#x2022; Found all the usual issues\u0026#x2028;\n- String duplication\u0026#x2028;\n- Empty or small (1-4 elements) collections\u0026#x2028;\n- Tons of small objects (object headers used 31% of heap!)\u0026#x2028;\n- Boxed numbers\n ","Standard solutions applied\n\u0026#x2022; Duplicate strings: add more String.intern() calls\u0026#x2028;\n- Easy: check jxray report, \u0026#xFB01;nd what data structures reference\nbad strings, edit code\u0026#x2028;\n- Non-trivial when a String object is mostly managed by auto-\ngenerated code\n\u0026#x2022; Bad collections: less trivial\u0026#x2028;\n- Sometimes it\u0026#x2019;s enough to replace new HashMap() with new\nHashMap(expectedSize)\u0026#x2028;\n- Found ArrayLists that almost always size 0/1\n ","Dealing with mostly 0/1-size ArrayLists\n\u0026#x2022; Replaced ArrayList list; \u0026#x2014;\u0026gt; Object valueOrArray;\n\u0026#x2022; Depending on the situation, valueOrArray may\u0026#x2028;\n- be null\u0026#x2028;\n- point to a single object (element)\u0026#x2028;\n- point to an array of objects (elements)\n\u0026#x2022; ~70 LOC hand-written for this\u0026#x2028;\n- But memory savings were worth the effort\n ","Dealing with non-string duplicate data\n\u0026#x2022; Heap contained a lot of of small objects\u0026#x2028;\nclass TimestampAndData {\u0026#x2028;\nlong timestamp;\u0026#x2028;\nlong value; \u0026#x2028;\n\u0026#x2026; }\n\u0026#x2022; Guessed that there may be many duplicates\u0026#x2028;\n- E.g. many values are just 0/1\n\u0026#x2022; Added a simple canonicalization cache. Result:\u0026#x2028;\n- 8x fewer TimestampAndData objects\u0026#x2028;\n- 16% memory savings\n ","A Monitoring app: conclusions\n\u0026#x2022; Fixing string/other data duplication, boxed nums,\nsmall/empty collections: together saved ~50%\u0026#x2028;\n- Depends on the workload\u0026#x2028;\n- Scalability improved: more data - higher savings\n\u0026#x2022; Can still save more - replace standard HashMaps\nwith more memory-friendly maps\u0026#x2028;\n- HashMap$Entry objects may take a lot of memory!\n ","Apache Hive: Hive Server 2 (HS2)\n\u0026#x2022; HS2 may run out of memory\n\u0026#x2022; Most scenarios involve 1000s of partitions and 10s\nof concurrent queries\n\u0026#x2022; Not many heap dumps from real users\n\u0026#x2022; Create a benchmark which reproduces the\nproblem, measure where memory goes, optimize\n ","Experimental setup\n\u0026#x2022; Created a Hive table with 2000 small partitions\n\u0026#x2022; Running 50 concurrent queries like \u0026#x201C;select\ncount(my\u0026#xFB01;eld_1) from mytable;\u0026#x201D; crashes an HS2\nserver with -Xmx500m\n\u0026#x2022; More partitions or concurrent queries - more\nmemory needed\n ","HS2: Investigation\n\u0026#x2022; Looked into the heap dump generated after OOM\n\u0026#x2022; Not too many different problems:\u0026#x2028;\n- Duplicate strings: 23%\u0026#x2028;\n- java.util.Properties objects take 20% of memory\u0026#x2028;\n- Various bad collections: 18%\n\u0026#x2022; Apparently, many Properties are duplicate\u0026#x2028;\n- A separate copy per partition per query\u0026#x2028;\n- For a read-only partition, all per-query copies are identical\n ","HS2: Fixing duplicate strings\n\u0026#x2022; Some String.intern() calls added\n\u0026#x2022; Some strings come from HDFS code\u0026#x2028;\n- Need separate changes in Hadoop code\n\u0026#x2022; Most interesting: String \u0026#xFB01;elds of java.net.URI\u0026#x2028;\n- private \u0026#xFB01;elds initialized internally - no access\u0026#x2028;\n- But still can read/write using Java Re\u0026#xFB02;ection\u0026#x2028;\n- Wrote StringInternUtils.internStringsInURI(URI) method\n ","HS2: Fixing duplicate \u0026#x2028;\njava.util.Properties objects\n\u0026#x2022; Main problem: Properties object is mutable\u0026#x2028;\n- All PartitionDesc objects representing the same partition\ncannot simply use one \u0026#x201C;canonicalized\u0026#x201D; Properties object\u0026#x2028;\n- If one is changed, others should not!\n\u0026#x2022; Had to implement a new class\u0026#x2028;\nclass CopyOnFirstWriteProperties extends Properties {\u0026#x2028;\nProperties interned; // Used until/unless a mutator called\u0026#x2028;\n// Inherited table is \u0026#xFB01;lled and used after \u0026#xFB01;rst mutation\u0026#x2028;\n\u0026#x2026;\u0026#x2028;\n}\n ","HS2: Improvements based on simple\nread-only benchmark\n\u0026#x2022; Fixing duplicate strings and properties together\nsaved ~37% of memory\n\u0026#x2022; Another ~5% can be saved by reduplicating\nstrings in HDFS\n\u0026#x2022; Another ~10% can be saved by dealing with bad\ncollections\n ","Investigating/\u0026#xFB01;xing concrete apps:\nconclusions\n\u0026#x2022; Any app can develop memory problems over time\u0026#x2028;\n- Check and optimize periodically\n\u0026#x2022; Many such problems are easy enough to \u0026#xFB01;x\u0026#x2028;\n- Intern strings, initialize collections lazily, etc.\n\u0026#x2022; Duplication other than strings is frequent\u0026#x2028;\n- More dif\u0026#xFB01;cult to \u0026#xFB01;x, but may be well worth the effort\u0026#x2028;\n- Need to improve tooling to detect it automatically\n "],"ss-url-for-slideshow":"slideshow/java-memory-analysis-problems-and-solutions/75614475","slideshow_type_as_string":"presentation","pin-image-url":"https://cdn.slidesharecdn.com/ss_thumbnails/java-mem-analysis-publicslideshare-170502195101-thumbnail.jpg?width=640\u0026height=640\u0026fit=bounds"});
    </script>

    <script src="./Java Memory Analysis_ Problems and Solutions_files/core-utils.589162526057a6cb0e24.js"></script>

    

    <script src="./Java Memory Analysis_ Problems and Solutions_files/global.2384dabbaa0d5e6d8012.js"></script>

    

    

    <link rel="stylesheet" href="./Java Memory Analysis_ Problems and Solutions_files/modal_share.4f420759c85553a9472b.css" media="screen">
<link rel="stylesheet" href="./Java Memory Analysis_ Problems and Solutions_files/share-clipboard-modal.a9abc0e857ee432d7819.css" media="screen">
<link rel="stylesheet" href="./Java Memory Analysis_ Problems and Solutions_files/mobile_list_items.855daa4963cf55d9a7f2.css" media="screen">
  <meta class="foundation-data-attribute-namespace"><meta class="foundation-mq-xxlarge"><meta class="foundation-mq-xlarge-only"><meta class="foundation-mq-xlarge"><meta class="foundation-mq-large-only"><meta class="foundation-mq-large"><meta class="foundation-mq-medium-only"><meta class="foundation-mq-medium"><meta class="foundation-mq-small-only"><meta class="foundation-mq-small"><style></style><meta class="foundation-mq-topbar"></head>

  <body id="pagekey-slideshare_desktop_slideview_embed_code_loggedout" style="border:0;margin:0;padding:0;width:100%;height:100%;overflow:hidden;" class="">
    
<div id="new-player" data-slideshow-id="" class="presentation-player embed ">
  <div id="stage">
    

      <div class="inbetween-overlay" id="inbetween-overlay-1">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-1-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-1" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>
  <div class="inbetween-overlay" id="inbetween-overlay-2">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-2-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-2" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>
  <div class="inbetween-overlay" id="inbetween-overlay-3">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-3-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-3" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>
  <div class="inbetween-overlay" id="inbetween-overlay-4">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-4-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-4" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>
  <div class="inbetween-overlay" id="inbetween-overlay-5">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-5-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-5" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>
  <div class="inbetween-overlay" id="inbetween-overlay-6">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-6-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-6" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>
  <div class="inbetween-overlay" id="inbetween-overlay-7">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-7-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-7" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>
  <div class="inbetween-overlay" id="inbetween-overlay-8">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-8-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-8" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>
  <div class="inbetween-overlay" id="inbetween-overlay-9">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-9-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-9" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>
  <div class="inbetween-overlay" id="inbetween-overlay-10">
    <div class="ad-inner">
      
<div class="ad-container  interstitial" id="interstitial-ad-10-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-10" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
      <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
        <span class="ad-skip-message">Skip to next slide</span>
        <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
        <span class="ad-countdown">3</span></button>
    </div>
    <div class="ad-label-wrapper">
      <div class="ad-label-container">
        <span>Ad</span>
      </div>
    </div>
  </div>

<div class="inbetween-overlay" id="inbetween-overlay-video">
  <div class="ad-inner">
    
<div class="ad-container  interstitial" id="interstitial-ad-video-container" data-index="0">
  <div class="ad-inner-wrapper">
    <div id="interstitial-ad-video" style="min-width: 200px; min-height: 50px;" class="google-ad">
    </div>
      <a class="fallback-ad-container" target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
          <div class="fallback-ad en"></div>
      </a>
  </div>
</div>
    <div class="video-ad-loading-indicator"><div></div><div></div><div></div><div></div></div>
    <button type="button" class="skip-ad-button waiting-to-skip" disabled="disabled">
      <span class="ad-skip-message">Skip to next slide</span>
      <span class="ad-skip-countdown-message">You can skip to the next slide in</span>
      <span class="ad-countdown">3</span>
    </button>
    <button type="button" aria-label="Change Volume" class="volume-control"><i class="icon-low-volume"></i></button>
  </div>
  <div class="ad-label-wrapper">
    <div class="ad-label-container">
      <span>Ad</span>
    </div>
  </div>
  <button class="close-sticky-video" type="button" aria-label="Close ad">×</button>  
</div>

<div class="inbetween-overlay" id="inbetween-overlay-default-video">
  <div id="video-container">
    <a target="_blank" aria-label="Ad for Scribd subscription" rel="noopener noreferrer" alt="Ad for Scribd subscription" href="https://www.scribd.com/slideshare">
      <video id="inbetween-video" webkit-playsinline="" playsinline="" type="video/mp4">
        Your browser does not support the video tag.
        <track label="English" kind="subtitles" srclang="en" src="/videos/ads/video_reading_translations/english.vtt" default="">
        <track label="Deutsch" kind="subtitles" srclang="de" src="/videos/ads/video_reading_translations/german.vtt">
        <track label="Español" kind="subtitles" srclang="es" src="/videos/ads/video_reading_translations/spanish.vtt">
        <track label="Francais" kind="subtitles" srclang="fr" src="/videos/ads/video_reading_translations/french.vtt">
        <track label="Portugese" kind="subtitles" srclang="pt" src="/videos/ads/video_reading_translations/portugese.vtt">
      </video>
    </a>
    <button type="button" aria-label="Change Volume" class="volume-control"><i class="icon-low-volume"></i></button>
  </div>
  <button type="button" class="skip-ad-button">
    <span class="ad-skip-message">Skip to next slide</span>
  </button>
  <div class="ad-label-wrapper">
    <div class="ad-label-container">
      <span>Ad</span>
    </div>
  </div>
  <button class="close-sticky-video" type="button" aria-label="Close ad">×</button>  
</div>
    <div id="slide-container" data-cy="slide-container" tabindex="0">
        <div class="slide loaded current" id="slide-0" data-index="0">
              <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-1-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-1-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-1-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Java Memory Analysis:
Problems and Solutions
 " data-index="1" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-1-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-1-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-1-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-0"></picture>
          
</div>        <div class="slide loaded" id="slide-1" data-index="1">
              <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-2-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-2-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-2-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="How Java apps
(ab)use memory
 " data-index="2" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-2-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-2-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-2-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-1" loading="eager"></picture>
          
</div>        <div class="slide loaded" id="slide-2" data-index="2">
              <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-3-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-3-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-3-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Assume that at the high level your data
is represented efﬁciently
• Data doesn’t sit in memory for longer than needed
• No..." data-index="3" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-3-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-3-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-3-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-2" loading="eager"></picture>
          
</div>        <div class="slide loaded" id="slide-3" data-index="3">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-4-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-4-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-4-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Main sources of memory waste
(from bottom to top level)
• JVM internal object implementation
• Inefﬁcient common data stru..." data-index="4" loading="eager" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-4-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-4-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-4-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-3"></picture>
              
          
</div>        <div class="slide loaded" id="slide-4" data-index="4">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-5-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-5-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-5-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Internal Object Format in HotSpot JVM
 " data-index="5" loading="eager" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-5-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-5-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-5-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-4"></picture>
              
          
</div>        <div class="slide loaded" id="slide-5" data-index="5">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-6-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-6-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-6-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Internal Object Format: Alignment
• To enable 4-byte pointers (compressedOops) with
&gt;4G heap, objects are 8-byte aligned
•..." data-index="6" loading="eager" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-6-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-6-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-6-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-5"></picture>
              
          
</div>        <div class="slide loaded" id="slide-6" data-index="6">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-7-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-7-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-7-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Summary: small objects are bad
• A small object’s overhead is up to 400% of its
workload
• There are apps with up to 40% o..." data-index="7" loading="eager" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-7-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-7-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-7-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-6"></picture>
              
          
</div>        <div class="slide loaded" id="slide-7" data-index="7">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-8-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-8-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-8-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Common Collections
• JDK: java.util.ArrayList, java.util.HashMap,
java.util.concurrent.ConcurrentHashMap etc.
• Third-part..." data-index="8" loading="eager" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-8-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-8-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-8-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-7"></picture>
              
          
</div>        <div class="slide loaded" id="slide-8" data-index="8">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-9-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-9-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-9-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="ArrayList Internals
 " data-index="9" loading="eager" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-9-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-9-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-9-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-8"></picture>
              
          
</div>        <div class="slide loaded" id="slide-9" data-index="9">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-10-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-10-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-10-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="HashMap Internals
 " data-index="10" loading="eager" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-10-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-10-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-10-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-9"></picture>
              
          
</div>        <div class="slide loaded" id="slide-10" data-index="10">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-11-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-11-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-11-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Memory Footprint of JDK Collections
• JDK pays not much attention to memory footprint 
- Just some optimizations for empty..." data-index="11" loading="eager" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-11-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-11-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-11-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-10"></picture>
              
          
</div>        <div class="slide" id="slide-11" data-index="11">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-12-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-12-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-12-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Boxed numbers - related to collections
• java.lang.Integer, java.lang.Double etc.
• Were introduced mainly to avoid creati..." data-index="12" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-12-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-12-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-12-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-11"></picture>
              
          
</div>        <div class="slide" id="slide-12" data-index="12">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-13-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-13-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-13-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="JDK Collections: Summary
• Initialized, but empty collections waste memory
• Things like HashMap&lt;Object, Integer&gt; are bad
..." data-index="13" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-13-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-13-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-13-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-12"></picture>
              
          
</div>        <div class="slide" id="slide-13" data-index="13">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-14-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-14-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-14-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Data Duplication
• Can happen for many reasons: 
- s = s1 + s2 or s = s.toUpperCase() etc. always
generates a new String o..." data-index="14" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-14-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-14-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-14-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-13"></picture>
              
          
</div>        <div class="slide" id="slide-14" data-index="14">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-15-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-15-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-15-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Dealing with String duplication
• Use tooling to determine where dup strings are either 
- generated, e.g. s = s.toUpperCa..." data-index="15" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-15-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-15-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-15-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-14"></picture>
              
          
</div>        <div class="slide" id="slide-15" data-index="15">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-16-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-16-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-16-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Other duplicate data
• Can be almost anything. Examples: 
- Timestamp objects 
- Partitions (with HashMaps and ArrayLists)..." data-index="16" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-16-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-16-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-16-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-15"></picture>
              
          
</div>        <div class="slide" id="slide-16" data-index="16">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-17-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-17-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-17-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Dealing with non-string duplicates
• Use WeakHashMap to store canonicalized objects 
- com.google.common.collect.Interner ..." data-index="17" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-17-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-17-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-17-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-16"></picture>
              
          
</div>        <div class="slide" id="slide-17" data-index="17">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-18-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-18-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-18-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Duplicate Data: Summary
• Duplicate data may cause huge memory waste 
- Observed up to 40% overhead in unoptimized apps
• ..." data-index="18" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-18-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-18-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-18-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-17"></picture>
              
          
</div>        <div class="slide" id="slide-18" data-index="18">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-19-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-19-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-19-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Memory Leaks
• Unlike C++, Java doesn’t have real leaks 
- Data that’s not used anymore, but not released 
- Too much pers..." data-index="19" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-19-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-19-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-19-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-18"></picture>
              
          
</div>        <div class="slide" id="slide-19" data-index="19">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-20-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-20-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-20-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="JXRay Memory
Analysis Tool
 " data-index="20" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-20-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-20-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-20-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-19"></picture>
              
          
</div>        <div class="slide" id="slide-20" data-index="20">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-21-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-21-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-21-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="What is it
• Ofﬂine heap analysis tool 
- Runs once on a given heap dump, produces a text report
• Simple command-line int..." data-index="21" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-21-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-21-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-21-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-20"></picture>
              
          
</div>        <div class="slide" id="slide-21" data-index="21">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-22-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-22-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-22-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="JXRay: main features
• Shows you what occupies the heap 
- Object histogram: which objects take most memory 
- Reference c..." data-index="22" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-22-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-22-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-22-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-21"></picture>
              
          
</div>        <div class="slide" id="slide-22" data-index="22">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-23-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-23-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-23-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Keeping results succinct
• No GUI - generates a plain text report 
- Easy to save and exchange 
- Small: ~50K regardless o..." data-index="23" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-23-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-23-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-23-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-22"></picture>
              
          
</div>        <div class="slide" id="slide-23" data-index="23">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-24-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-24-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-24-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Reference chain aggregation:
assumptions
• A problem is important if many objects have it 
- E.g.1000s/1000,000s of duplic..." data-index="24" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-24-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-24-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-24-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-23"></picture>
              
          
</div>        <div class="slide" id="slide-24" data-index="24">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-25-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-25-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-25-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Reference chain aggregation: what is it
• In the heap, we may have e.g. 
Baz.stat1 -&gt; HashMap@243 -&gt; ArrayList@650 -&gt; Foo...." data-index="25" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-25-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-25-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-25-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-24"></picture>
              
          
</div>        <div class="slide" id="slide-25" data-index="25">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-26-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-26-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-26-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Treating collections specially
• Object histogram: standard vs JXRay view 
HashMap$Entry 21500 objs 430K 
HashMap$Entry[] ..." data-index="26" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-26-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-26-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-26-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-25"></picture>
              
          
</div>        <div class="slide" id="slide-26" data-index="26">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-27-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-27-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-27-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Bad collections
• Empty: no elements at all 
- Is it used at all? If yes, allocate lazily.
• 1-element 
- Always has only ..." data-index="27" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-27-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-27-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-27-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-26"></picture>
              
          
</div>        <div class="slide" id="slide-27" data-index="27">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-28-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-28-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-28-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Bad object arrays
• Empty: only nulls 
- Same as empty collections - delete or allocate lazily
• Length 0 
- Replace with ..." data-index="28" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-28-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-28-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-28-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-27"></picture>
              
          
</div>        <div class="slide" id="slide-28" data-index="28">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-29-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-29-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-29-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Memory Analysis and
Reducing Footprint:
concrete cases
 " data-index="29" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-29-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-29-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-29-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-28"></picture>
              
          
</div>        <div class="slide" id="slide-29" data-index="29">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-30-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-30-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-30-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="A Monitoring app
• Scalability wasn’t great 
- Some users had to increase -Xmx again and again. 
- Unclear how to choose t..." data-index="30" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-30-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-30-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-30-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-29"></picture>
              
          
</div>        <div class="slide" id="slide-30" data-index="30">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-31-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-31-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-31-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Investigation, part 1
• Started with the smaller dumps with OOMs 
- Immediately found duplicate strings 
- One string repe..." data-index="31" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-31-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-31-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-31-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-30"></picture>
              
          
</div>        <div class="slide" id="slide-31" data-index="31">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-32-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-32-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-32-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Investigation, part 2
• Next, looked into heap dumps with scalability
problems 
- Both real and artiﬁcial benchmark setup
..." data-index="32" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-32-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-32-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-32-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-31"></picture>
              
          
</div>        <div class="slide" id="slide-32" data-index="32">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-33-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-33-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-33-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Standard solutions applied
• Duplicate strings: add more String.intern() calls 
- Easy: check jxray report, ﬁnd what data ..." data-index="33" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-33-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-33-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-33-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-32"></picture>
              
          
</div>        <div class="slide" id="slide-33" data-index="33">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-34-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-34-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-34-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Dealing with mostly 0/1-size ArrayLists
• Replaced ArrayList list; —&gt; Object valueOrArray;
• Depending on the situation, v..." data-index="34" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-34-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-34-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-34-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-33"></picture>
              
          
</div>        <div class="slide" id="slide-34" data-index="34">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-35-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-35-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-35-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Dealing with non-string duplicate data
• Heap contained a lot of of small objects 
class TimestampAndData { 
long timestam..." data-index="35" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-35-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-35-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-35-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-34"></picture>
              
          
</div>        <div class="slide" id="slide-35" data-index="35">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-36-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-36-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-36-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="A Monitoring app: conclusions
• Fixing string/other data duplication, boxed nums,
small/empty collections: together saved ..." data-index="36" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-36-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-36-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-36-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-35"></picture>
              
          
</div>        <div class="slide" id="slide-36" data-index="36">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-37-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-37-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-37-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Apache Hive: Hive Server 2 (HS2)
• HS2 may run out of memory
• Most scenarios involve 1000s of partitions and 10s
of concu..." data-index="37" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-37-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-37-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-37-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-36"></picture>
              
          
</div>        <div class="slide" id="slide-37" data-index="37">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-38-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-38-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-38-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Experimental setup
• Created a Hive table with 2000 small partitions
• Running 50 concurrent queries like “select
count(my..." data-index="38" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-38-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-38-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-38-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-37"></picture>
              
          
</div>        <div class="slide" id="slide-38" data-index="38">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-39-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-39-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-39-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="HS2: Investigation
• Looked into the heap dump generated after OOM
• Not too many different problems: 
- Duplicate strings..." data-index="39" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-39-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-39-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-39-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-38"></picture>
              
          
</div>        <div class="slide" id="slide-39" data-index="39">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-40-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-40-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-40-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="HS2: Fixing duplicate strings
• Some String.intern() calls added
• Some strings come from HDFS code 
- Need separate chang..." data-index="40" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-40-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-40-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-40-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-39"></picture>
              
          
</div>        <div class="slide" id="slide-40" data-index="40">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-41-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-41-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-41-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="HS2: Fixing duplicate  
java.util.Properties objects
• Main problem: Properties object is mutable 
- All PartitionDesc obj..." data-index="41" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-41-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-41-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-41-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-40"></picture>
              
          
</div>        <div class="slide" id="slide-41" data-index="41">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-42-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-42-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-42-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="HS2: Improvements based on simple
read-only benchmark
• Fixing duplicate strings and properties together
saved ~37% of mem..." data-index="42" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-42-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-42-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-42-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-41"></picture>
              
          
</div>        <div class="slide" id="slide-42" data-index="42">
              
                <picture><source srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-43-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-43-638.jpg?cb=1665811681 638w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/75/Java-Memory-Analysis-Problems-and-Solutions-43-2048.jpg?cb=1665811681 2048w" sizes="100vw" type="image/webp"><img class="slide-image" alt="Investigating/ﬁxing concrete apps:
conclusions
• Any app can develop memory problems over time 
- Check and optimize perio..." data-index="43" loading="lazy" src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-43-320.jpg" srcset="https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-43-320.jpg?cb=1665811681 320w, https://image.slidesharecdn.com/java-mem-analysis-publicslideshare-170502195101/85/Java-Memory-Analysis-Problems-and-Solutions-43-638.jpg?cb=1665811681 638w" sizes="100vw" id="slide-image-42"></picture>
              
          
</div>        <div class="slide-end-trap"></div>
    </div>
    <div class="rightpoint pointly"></div>
    <div class="leftpoint pointly"></div>
  </div>

  
  
  <div class="modal-share new-player-share" style="display: none;" id="slideview-modal-share" data-ga-track-category="bigfoot_slideview">
  <div class="j-modal-popup modal-popup" role="dialog" aria-labelledby="button-share-tab">
    <div class="modal-content-wrapper">
      <div class="j-modal-content modal-content" id="share-screen-modal-content" data-slideshowid="">
        <button type="button" class="j-modal-close modal-close" aria-label="Close"></button>  
        <header class="j-tabs tabs">
          <a id="button-share-tab" role="button" class="selected j-button-share-tab">Share SlideShare</a>
          <hr class="divider">
        </header>
      
        <div>
          <div>
            <ul class="j-share-social-list share-social-list" data-canonical-url="https://www.slideshare.net/slideshow/java-memory-analysis-problems-and-solutions/75614475">
              <li class="facebook" data-network="facebook">
                <div class="social-hover">
                  <a class="share-link" rel="nofollow" data-url="https://www.slideshare.net/slideshow/java-memory-analysis-problems-and-solutions/75614475" title="Share on Facebook" href="https://www.slideshare.net/slideshow/embed_code/key/9JyHcpL99Us0zG#">Facebook</a>
                </div>
              </li>
              <li class="twitter" data-network="twitter">
                <div class="social-hover">
                  <a class="share-link" rel="nofollow" data-url="https://www.slideshare.net/slideshow/java-memory-analysis-problems-and-solutions/75614475" data-text="Java Memory Analysis: Problems and Solutions #garbagecollection #heap" data-related="" data-via="SlideShare" title="Tweet on Twitter" href="https://www.slideshare.net/slideshow/embed_code/key/9JyHcpL99Us0zG#">Twitter</a>
                </div>
              </li>
              <li class="linkedin" data-network="linkedin">
                <div class="social-hover">
                  <a class="share-link" rel="nofollow" data-url="https://www.slideshare.net/slideshow/java-memory-analysis-problems-and-solutions/75614475" data-text="Java Memory Analysis: Problems and Solutions by &quot;Mikhail &quot;Misha&quot;&quot; Dmitriev via slideshare" title="Share on Linkedin" href="https://www.slideshare.net/slideshow/embed_code/key/9JyHcpL99Us0zG#">LinkedIn</a>
                </div>
              </li>
            </ul>
          </div>
          <div class="j-share-embed section share-embed">
            <label class="header" for="share-embed-link">Embed</label>
            <textarea id="share-embed-link" class="j-share-embed-link j-share-expand-trigger" readonly="" data-ga="link"></textarea>
            <div class="share-embed-options j-share-expand">
              <div class="embed-size">
                <label class="title" for="embed-size-picker">Size (px)</label>
                <select class="j-embed-size-picker embed-size-picker j-update-embed" id="embed-size-picker" data-ga="size-picker"></select>
              </div>
              <div class="embed-show-related" style="display:none">
                <input type="checkbox" name="related-content" checked="checked" class="j-embed-related-cbox embed-related-cbox j-update-embed" data-ga="related">
                <span>Show related SlideShares at end</span>
              </div>
            </div>
          </div>
          <div class="wordpress-container section">
            <label class="header" for="share-embed-wp">WordPress Shortcode</label>
            <input type="text" name="embed-code" id="share-embed-wp" value="" readonly="readonly" class="j-share-embed-wp text quiet h-wpembedcode j-share-expand-trigger" data-ga="wp-link">
          </div>
          <div class="share-link-container section">
            <label class="header" for="share-link-url">Link</label>
            <input type="text" class="j-share-link-url j-share-expand-trigger" id="share-link-url" data-ga="link" readonly="">
          </div>
        </div>
      </div>
    </div>
  </div>
</div><!-- share modal -->

  <div id="lastScreen" style="display: none;">
    <div class="lastScreen">
  <div class="jsplLastScreenOverlay j-last-screen-overlay"></div>
  <div class="pro-overlay j-lastscreen">
      <ul class="lastActions j-last-screen-actions">
        <li class="share-cta j-share-cta lastscreen-share-cta"><a class="share-btn"><span class="lastScreen-sprite"></span>Share</a></li>
        <li class="email-cta j-email-cta"><a class="email-btn"><span class="lastScreen-sprite"></span>Email</a></li>
        <li class="replay last">
          <a class="replay-btn lastScreenReplay j-tooltip j-last-screen-replay" data-original-title="View again" title="View again">
            <span class="lastScreen-sprite">&nbsp;</span>
          </a>
        </li>
        <li class="close-btn lastScreen-sprite j-lastscreen-close">
          <a>&nbsp;</a>
        </li>
      </ul>
      <div class="related-presentations j-lastscreen-related">
        <ul class="presentation-list">
          <li>
          <a href="https://www.slideshare.net/slideshow/exactlyonce-stream-processing-with-kafka-streams-80077182/80077182" title="Exactly-once Stream Processing with..." target="_blank">
            <img class="j-thumbnail" data-original="https://cdn.slidesharecdn.com/ss_thumbnails/kafkastreamseoskafkasummitsf2017final-170923064446-thumbnail.jpg?width=320&amp;height=320&amp;fit=bounds" alt="Exactly-once Stream Processing with..." src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC">
            <span class="presentation-meta">
              <span class="title">Exactly-once Stream Processing with...</span>
              <span class="author">by&nbsp;Guozhang Wang</span>
              <span class="view-count">3750&nbsp;views</span>
            </span>
          </a>
          </li>
        </ul>
      </div>
  </div> <!-- end of div class pro-overlay -->
</div><!-- last screen ends here -->

  </div>

  <div id="filmstrip" style="display: none;">
  <div class="filmstrip-lens">
    <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-23-320.jpg" class="filmstrip-lens-image" alt="">
    <span class="top-clip-label">Top clipped slide</span>
  </div>
  <ul id="filmstrip-list" style="margin-left: 1533.9px;">
      <li id="thumbnail-0" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-1-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-1" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-2-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-2" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-3-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-3" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-4-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-4" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-5-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-5" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-6-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-6" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-7-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-7" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-8-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-8" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-9-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-9" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-10-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-10" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-11-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-11" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-12-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-12" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-13-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-13" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-14-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-14" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-15-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-15" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-16-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-16" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-17-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-17" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-18-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-18" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-19-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-19" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-20-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-20" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-21-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-21" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-22-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-22" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-23-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-23" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-24-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-24" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-25-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-25" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-26-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-26" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-27-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-27" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-28-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-28" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-29-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-29" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-30-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-30" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-31-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-31" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-32-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-32" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-33-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-33" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-34-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-34" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-35-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-35" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-36-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-36" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-37-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-37" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-38-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-38" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-39-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-39" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-40-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-40" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-41-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-41" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-42-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
      <li id="thumbnail-42" style="margin: 4px;" class="filmstrip-item">
        
          <img src="./Java Memory Analysis_ Problems and Solutions_files/Java-Memory-Analysis-Problems-and-Solutions-43-320.jpg" class="filmstrip-thumb" loading="lazy" alt="">
        
      </li>
  </ul>
</div>

  <div id="player-toolbar">
  <div id="progress-bar">
  <div class="clipping-indicator-container">
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
      <div class="clipping-indicator">
        <span class="clipping-indicator-nub"></span>
      </div>
  </div>
  <div class="buffered-bar"></div>
  <div class="progress-container" style="width: 2.32558%;">
  </div>
</div>

  <div id="player-toolbar-left-actions" class="player-toolbar-item">
      <button type="button" data-action="share" class="share share-event-logging new-player-share-modal-trigger" aria-label="Share SlideShare">
        <i class="icon-share"></i>
      </button>
  </div>
  <div id="player-navigation" class="player-toolbar-item">
    <button type="button" id="previous-slide" data-cy="previous-button" aria-label="Previous Slide" disabled="">
      <i class="icon-chevron-left"></i>
    </button>
    <span class="slide-index" aria-live="polite" aria-atomic="true">
      <span data-cy="current-slide-number" class="current-slide-number j-current-slide">1</span> of <span class="total-slides j-total-slides">43</span>
    </span>
    <span class="ad-notification">Ad</span>
    <button type="button" id="next-slide" data-cy="next-button" aria-label="Next Slide"> 
      <i class="icon-chevron-right"></i>
    </button>
  </div>
  <div id="player-toolbar-right-actions" class="player-toolbar-item">
    <div class="zoom-slide">
      <button type="button" class="zoom-in" aria-label="Zoom In">
        <i class="icon-zoom-in"></i>
      </button>
      <button type="button" class="zoom-out" aria-label="Zoom Out">
        <i class="icon-zoom-out"></i>
      </button>
    </div>
    <button type="button" id="fullscreen" aria-label="View Fullscreen">
      <i class="icon-focus fullscreen-icon"></i>
    </button>
  </div>
</div>
  
<div id="player-fullscreen-overlay">
  <div id="overlay-player-left">
    <button type="button" id="overlay-previous-slide" data-cy="overlay-previous-button" aria-label="Previous Slide" disabled="">
      <i class="icon-chevron-left"></i>
    </button>
  </div>
  <div id="overlay-player-top" class="no-download-or-clip">
    <div class="button-container">
      


    </div>
  </div>
  <div id="overlay-player-bottom">
    <div id="player-fullscreen-navigation" class="player-toolbar-item">
      <span class="slide-index" aria-live="polite" aria-atomic="true">
        <span data-cy="current-slide-number" class="current-slide-number j-current-slide">1</span> of <span class="total-slides j-total-slides">43</span>
      </span>
      <span class="ad-notification">Ad</span>
    </div>
    <div class="content-right">
      <div class="zoom-slide">
        <button type="button" class="zoom-in" aria-label="Zoom In">
          <i class="icon-zoom-in"></i>
        </button>
        <button type="button" class="zoom-out" aria-label="Zoom Out">
          <i class="icon-zoom-out"></i>
        </button>
      </div>
      <button type="button" id="exit-fullscreen" aria-label="Exit Fullscreen">
        <i class="icon-compress exit-fullscreen-icon"></i>
      </button>
    </div>
  </div>
  <div id="overlay-player-right">
    <button type="button" id="overlay-next-slide" data-cy="overlay-next-button" aria-label="Next Slide"> 
      <i class="icon-chevron-right"></i>
    </button>
  </div>
</div>

</div>


    <script>
    window.feature_flags = {
      disable_facebook: true,
      document_interstitials_flag: true,
      minimalist_header: false,
      recommendation_impression_tracking: true,
      search_results_tracking: true, 
      view_restriction_without_subscription_after_five: true,
    };
</script>

    <script>
    window.ab_tests = {}
  window.nway_tests = {"example":"B","gallery_view":"B","nextjs_profile":"A","no_author_mobile":"A","reading_modes":"A","recs_placement":"A","recs_placement_v2":"A"}
</script>


    <script src="./Java Memory Analysis_ Problems and Solutions_files/jquery.scrollTo-1.4.4.min.7440369579e8c0131818.js"></script>
    <script src="./Java Memory Analysis_ Problems and Solutions_files/combined_analytics.fdde98f87e534aae1ca6.js"></script>
    <script src="./Java Memory Analysis_ Problems and Solutions_files/combined_base.8610e525214bd42f1b82.js"></script>
    <script src="./Java Memory Analysis_ Problems and Solutions_files/combined_foundation.6e611f74784afb9262ed.js"></script>
    <script src="./Java Memory Analysis_ Problems and Solutions_files/combined_player.1aa966d69843d108d291.js" defer="defer"></script>
    <script src="./Java Memory Analysis_ Problems and Solutions_files/page-view.977ec04ad7b01b54c2f6.js"></script>
  

</body></html>